/*! For license information please see main.ecc3ff1e.chunk.js.LICENSE.txt */
(this["webpackJsonp@r-generate/page"]=this["webpackJsonp@r-generate/page"]||[]).push([[0],{0:function(e,t){e.exports=React},241:function(e,t,n){},258:function(e,t){e.exports=Babel},269:function(e,t){e.exports=immer},357:function(e,t){e.exports=ReactDraggable},362:function(e,t,n){},38:function(e,t){e.exports=icons},39:function(e,t){e.exports=ReactDOM},631:function(e,t,n){},632:function(e,t,n){},633:function(e,t,n){},634:function(e,t,n){},636:function(e,t){e.exports=Sortable},637:function(e,t,n){},638:function(e,t,n){},639:function(e,t,n){},640:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),i=n(39),c=n.n(i),r=n(27),l=n(36),s=n(40),u=n(91),d=n(64),f=n(38),b=Object(f.createFromIconfontCN)({scriptUrl:"//at.alicdn.com/t/font_2351518_b097rjuqmfk.js"});Object.entries(f).filter((function(e){var t=e||[],n=Object(l.a)(t,1)[0];return!["IconProvider","default","setTwoToneColor","getTwoToneColor","createFromIconfontCN"].includes(n)}));var p=function(){var e={};return Object.entries(f).filter((function(e){var t=e||[],n=Object(l.a)(t,1)[0];return!["IconProvider","default","setTwoToneColor","getTwoToneColor","createFromIconfontCN"].includes(n)})).forEach((function(t){var n=t||[],o=Object(l.a)(n,2),a=o[0],i=o[1];e[a]=i})),e}(),j="drag-target",m=n(37),v=n(96),O=n(9),h=m.Utils.shortid,x=m.Store.actionTypes,g=m.Store.Hooks.useStore,y=x.PUT_COMPONENT_LIST,k=[{label:"\u8f93\u5165\u578b\u7ec4\u4ef6",key:"input-group",value:"input-group",icon:"icon-input",children:[{label:"\u5355\u884c\u6587\u672c",key:"Input",value:"Input",icon:"icon-input"},{label:"\u591a\u884c\u6587\u672c",key:"Input.TextArea",value:"Input.TextArea",icon:"icon-textarea"},{label:"\u5bc6\u7801",key:"Input.Password",value:"Input.Password",icon:"icon-password"},{label:"\u8ba1\u6570\u5668",key:"InputNumber",value:"InputNumber",icon:"icon-number"}]},{label:"\u9009\u62e9\u578b\u7ec4\u4ef6",key:"select-group",value:"select-group",icon:"icon-xuanze",children:[{label:"\u4e0b\u62c9\u9009\u62e9",key:"Select",value:"Select",icon:"icon-xiala"},{label:"\u7ea7\u8054\u9009\u62e9",key:"Cascader",value:"Cascader",icon:"icon-jilianxuanze"},{label:"\u5355\u9009\u6846\u7ec4",key:"Radio",value:"Radio",icon:"icon-danxuan"},{label:"\u591a\u9009\u6846\u7ec4",key:"Checkbox",value:"Checkbox",icon:"icon-duoxuan"},{label:"\u5f00\u5173",key:"Switch",value:"Switch",icon:"icon-kaiguan"},{label:"\u6ed1\u5757",key:"Slider",value:"Slider",icon:"icon-huakuai"},{label:"\u65f6\u95f4\u9009\u62e9",key:"TimePicker",value:"TimePicker",icon:"icon-date-1"},{label:"\u65f6\u95f4\u8303\u56f4",key:"TimePicker.RangePicker",value:"TimePicker.RangePicker",icon:"icon-shijianfanwei"},{label:"\u65e5\u671f\u9009\u62e9",key:"DatePicker",value:"DatePicker",icon:"icon-riqi"},{label:"\u65e5\u671f\u8303\u56f4",key:"DatePicker.RangePicker",value:"DatePicker.RangePicker",icon:"icon-riqifanwei"},{label:"\u8bc4\u5206",key:"Rate",value:"Rate",icon:"icon-pingfen"},{label:"\u4e0a\u4f20",key:"Upload",value:"Upload",icon:"icon-shangchuan"}]},{label:"\u5e03\u5c40\u578b\u7ec4\u4ef6",key:"layout-group",value:"layout-group",icon:"icon-layout",children:[{label:"\u5217\u88681",key:"List1",value:"List1",icon:"icon-hangrongqi"}]}].map((function(e){var t;return Object(r.a)(Object(r.a)({},e),{},{children:null===e||void 0===e||null===(t=e.children)||void 0===t?void 0:t.map((function(e){var t=e||{},n=t.value,o=t.label,a=t.icon,i=h(),c={value:n,label:o,icon:a,id:i,key:i,componentKey:n,formItemProps:{name:i,label:o},colProps:{},rowProps:{},componentProps:{},layout:{frame:{translate:[0,0]}}};return["List1"].includes(n)&&(c.colProps={lg:24,md:24,sm:24,xl:24,xs:24,xxl:24},c.formItemProps.labelCol={span:24}),c}))})})),w=function(){var e=g().setGlobal;return Object(O.jsx)(O.Fragment,{children:k.map((function(t){return Object(O.jsxs)("div",{children:[Object(O.jsx)(s.a,{className:"title-btn",style:{paddingLeft:12},icon:Object(O.jsx)(b,{type:t.icon}),type:"text",disabled:!0,children:t.label}),Object(O.jsx)(u.a,{gutter:[6,6],style:{padding:"0 12px 12px 12px"},children:t.children&&t.children.map((function(t){return Object(O.jsx)(d.a,{span:12,className:"left-sidebar-col",children:Object(O.jsx)(s.a,{block:!0,style:{backgroundColor:"#f8f8f8",fontSize:"12px"},type:"default",icon:Object(O.jsx)(b,{type:t.icon}),onClick:function(){var n,o=h(),a=Object(v.cloneDeep)(t);a.id=o,a.key=o,(null===(n=a.formItemProps)||void 0===n?void 0:n.name)&&(a.formItemProps.name=o),e({type:y,payload:a})},children:t.label})},t.value)}))})]},t.key)}))})},C=n(117),T=C.AntdMapping.Setting,E=function(){return Object(O.jsx)(T,{})},S=n(113),P=n(84),N=n(243),L=n(131),R=n.n(L),I=n(178);function _(){var e=50+(document.querySelector(".coms")?250:0)+60+(document.querySelector(".setting")?300:0)+50+14,t=document.querySelector(".viewport");t.style.width=.95*(window.innerWidth-e)+"px",t.style.height=.95*(window.innerHeight-74)+"px"}function F(e){return["TimePicker","TimePicker.RangePicker","DatePicker","DatePicker.RangePicker"].includes(e)}function D(e){return["Radio","Checkbox","Switch"].includes(e)}function z(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return Number(Math.random().toString().substr(3,e)+Date.now()).toString(36)}var G=n(79),M=["defaultValue","prefix","suffix"];function A(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e){var n=p[e];if(n&&t)return n||o.Fragment;if(n&&!t)return"<".concat(e," />")}return t?o.Fragment:null}var V=C.AntdMapping.Mapping.getComponent,B={readOnly:!0,open:!1},K=function(e){var t=e.id,n=e.children,a=e.componentKey,i=e.formProps,c=void 0===i?{}:i,l=e.formItemProps,s=void 0===l?{}:l,u=e.componentProps,d=void 0===u?{}:u,f=e.rowProps,b=void 0===f?{}:f,p=e.form,j=e.className,m=e.style;(F(a)&&!G.isMoment(null===p||void 0===p?void 0:p.getFieldValue(s.name))||["Cascader"].includes(a))&&(null===p||void 0===p||p.setFieldsValue(Object(S.a)({},s.name,"")));d.defaultValue;var v=d.prefix,h=d.suffix,x=Object(P.a)(d,M);if(["Input"].includes(a)){var g=A(v,!0),y=A(h,!0);x.prefix=Object(O.jsx)(g,{}),x.suffix=Object(O.jsx)(y,{})}var k=c.labelCol,w=void 0===k?{}:k,C=c.wrapperCol,T=void 0===C?{}:C,E=s.labelCol,L=void 0===E?{}:E,R=s.wrapperCol,I=void 0===R?{}:R,_=Object(r.a)(Object(r.a)({},s),{},{labelCol:Object(r.a)(Object(r.a)({},w),L),wrapperCol:Object(r.a)(Object(r.a)({},T),I)});return function(e){return!["Col","Button","List1"].includes(e)}(a)?Object(O.jsx)(N.a.Item,Object(r.a)(Object(r.a)({},_),{},{style:m,className:j,valuePropName:D(a)?"checked":"value",children:o.cloneElement(V(a)||Object(O.jsx)(O.Fragment,{}),Object(r.a)(Object(r.a)({disabled:"Rate"===a},B),x))})):o.cloneElement(V(a)||Object(O.jsx)(O.Fragment,{}),Object(r.a)({id:t,children:n,rowProps:b,style:m,design:!0,name:null===s||void 0===s?void 0:s.name},x))},H=n(137),q=n(250),U=n(251),Y=n(218),W=n(179),X=n(180),J=n(154),Q=n(138),Z=n(112),$=n(246),ee=n(59),te=n(247),ne=n(95),oe=n(70),ae=n(252),ie=n(244),ce=n(227),re=n(249),le=n(242),se=n(258),ue=["TimePicker"],de=C.AntdMapping.List1,fe=function(){function e(t){Object(W.a)(this,e),this.genrate=void 0,this.genrate=t}return Object(X.a)(e,[{key:"replace",value:function(e){var t=e||this.genrate.generate();return t.substring(t.indexOf("export default"),t.indexOf("</Form>")).replace("export default","")+"</Form>}"}},{key:"string2Component",value:function(){var e=Object(I.a)(R.a.mark((function e(){var t,n,o,a,i,c,r,l=this,s=arguments;return R.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.length>0&&void 0!==s[0]?s[0]:[],n=s.length>1?s[1]:void 0,e.prev=2,i=this.replace(n),c=Object(se.transform)(i,{presets:["react","es2015"]}).code,c=null===(o=c)||void 0===o?void 0:o.replace('"use strict";',"").trim(),c=null===(a=c)||void 0===a?void 0:a.replace("(function","return (function"),r=new Function("context","with(context){\n            ".concat(c,"\n        }")),e.abrupt("return",(function(){try{return r(l.getContext(t))}catch(e){console.log("error",e),J.a.open({message:"\u8fd0\u884c\u9519\u8bef",description:e instanceof Error?e.message:"".concat(e)})}}));case 11:e.prev=11,e.t0=e.catch(2),console.log("e",e.t0),J.a.open({message:"\u8fd0\u884c\u9519\u8bef",description:e.t0 instanceof Error?e.t0.message:"".concat(e.t0)});case 15:case"end":return e.stop()}}),e,this,[[2,11]])})));return function(){return e.apply(this,arguments)}}()},{key:"getContext",value:function(e){Q.a.TimePicker;var t=Object(P.a)(Q.a,ue),n=Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)(Object(r.a)({React:o,Form:N.a,Input:Z.a},Z.a),{},{InputNumber:$.a,Select:ee.a},ee.a),{},{Cascader:te.a,Radio:ne.a,Checkbox:oe.a,Switch:ae.a,Slider:ie.a,TimePicker:ce.a},ce.a),{},{DatePicker:Q.a},t),{},{Rate:re.a,Upload:le.a,Row:u.a,Col:d.a,Button:s.a},p),{},{List1:de});return e.forEach((function(e){var t=e.componentKey,o=String(e.id).slice(0,4);n["".concat(t).concat(o)]=n.List1})),n}}]),e}(),be=n(267);function pe(e){return"\nimport * as React from 'react'\n".concat(function(){var t="Button, Form, Row, Col";return e.forEach((function(e){t+=", ".concat(e.componentKey)})),"import { ".concat(t," } from 'antd'")}(),"\nimport { DeleteOutlined, PlusOutlined, CopyOutlined } from '@ant-design/icons'\n\nexport interface IItem {\n  label: string\n  name?: string\n  field: string\n  componentKey: string\n  rules?: Record<string, any>[]\n}\n\ninterface IList1Props {\n  name?: string // \u8868\u5355\u6570\u636e\u5b57\u6bb5\u540d\n  fields?: IItem[] // \u6bcf\u884c\u5143\u7d20\n  form?: any // \u6bcf\u884c\u5143\u7d20\n}\n\n/**\n * list\u7ec4\u4ef6\n */\nexport default (props: IList1Props) => {\n  const { name = 'demo', fields = [], form } = props\n  const number = fields?.length || 0 // \u6bcf\u884c\u5143\u7d20\u4e2a\u6570\n  const operateCol = 3 // \u64cd\u4f5c\u6309\u94ae\u683c\u6570\n  const span = Math.floor((24 - operateCol) / number)\n  const colProps = {\n    lg: span,\n    md: span,\n    sm: span,\n    xl: span,\n    xs: span,\n    xxl: span,\n  }\n\n  const renderFormItems = (index: number, name: number, fieldKey: number) => {\n    const showLable = index === 0\n    return ").concat(function(){var t="";return e.forEach((function(e){t+="<Col {...colProps}>\n            <Form.Item\n              label={showLable && '".concat(e.label,"'}\n              labelCol={{ span: 24 }}\n              name={[name, '").concat(e.field,"']}\n              fieldKey={[fieldKey, '").concat(e.field,"']}\n              rules={").concat(e.rules||"[]","}\n            >\n              <").concat(e.componentKey," />\n            </Form.Item>\n          </Col>\n")})),"<React.Fragment key={fieldKey}>\n".concat(t,"</React.Fragment>")}(),"\n  }\n\n  useEffect(() => {\n    form.setFieldsValue({\n        [name]: [").concat(JSON.stringify(function(){var t={};return e.forEach((function(e){t[e.field]=void 0})),t}()),']\n    })\n  }, [])\n\n  return (\n      <Form.List name={name}>\n        {(fields, { add, remove }) => (\n          <>\n            {fields.map(({ key, name: _name, fieldKey, ...restField }, index) => {\n              return (\n                <Row key={key} gutter={15}>\n                  {renderFormItems(index, _name, fieldKey)}\n                  <Col span={operateCol}>\n                    <Form.Item\n                      labelCol={index === 0 ? { span: 24 } : undefined}\n                      colon={false}\n                      label={index === 0 ? <div></div> : undefined}\n                    >\n                      <DeleteOutlined onClick={() => remove(_name)} />\n                      <CopyOutlined\n                        style={{ marginLeft: 8 }}\n                        onClick={() => {\n                          // \u83b7\u53d6\u5f53\u524d\u884c\u7684\u9ed8\u8ba4\u503c\n                          const defaultValue =\n                            form.getFieldsValue()?.[name]?.[index] || {}\n                          add(defaultValue)\n                        }}\n                      />\n                    </Form.Item>\n                  </Col>\n                </Row>\n              )\n            })}\n            <Row>\n              <Col span={Math.floor(span * number)}>\n                <Form.Item>\n                  <Button\n                    type="dashed"\n                    onClick={() => add()}\n                    block\n                    icon={<PlusOutlined />}\n                  >\n                    \u65b0\u589e\u4e00\u6761\n                  </Button>\n                </Form.Item>\n              </Col>\n            </Row>\n          </>\n        )}\n      </Form.List>\n  )\n}\n')}var je=n(645),me=n(644),ve=(n(361),n(362),m.Store.Hooks.useStore),Oe=H.a.TabPane,he={marginTop:0,height:"calc(100vh - 35px)",overflowY:"auto"},xe=function(){return Object(O.jsx)(f.EditOutlined,{style:{color:"#f1fa8c",marginRight:"5px"}})},ge=function(){return Object(O.jsx)(f.FileTextOutlined,{style:{color:"#a95812",marginRight:"5px"}})},ye=Object(o.forwardRef)((function(e,t){var n,a=Object(o.useState)(""),i=Object(l.a)(a,2),c=i[0],r=i[1],u=Object(o.useState)(!1),d=Object(l.a)(u,2),b=d[0],p=d[1],j=Object(o.useState)("tsx"),v=Object(l.a)(j,2),h=v[0],x=v[1],g=Object(o.useState)(Object(O.jsx)(O.Fragment,{})),y=Object(l.a)(g,2),k=y[0],w=y[1],C=Object(o.useRef)(null),T=Object(o.useRef)(null),E=Object(o.useState)(""),S=Object(l.a)(E,2),P=S[0],N=S[1],L=ve(),R=L.componentList,I=L.target,_=null===R||void 0===R||null===(n=R.filter)||void 0===n?void 0:n.call(R,(function(e){return"List1"===e.componentKey})),F=(Object(o.useCallback)((function(e){r(e)}),[]),function(){p(!1),x("tsx")});return Object(o.useImperativeHandle)(t,(function(){return{tsxEditor:C.current,lessEditor:T.current,setTsxCode:r,open:function(){p(!0)},close:F,run:function(){!function(e){var t=new m.Generate.Generate(R,I);r(e||t.generate()),new fe(t).string2Component(_,e).then((function(e){if("function"===typeof e){var t=e();w(Object(O.jsx)(t,{}))}}))}()}}}),[R,I]),Object(o.useEffect)((function(){var e=.3*window.screen.width;N(e)}),[]),Object(O.jsx)(q.a,{width:"100%",visible:b,destroyOnClose:!0,closable:!1,onClose:F,children:Object(O.jsx)("div",{className:"preview",children:Object(O.jsxs)(be.a,{split:"vertical",minSize:0,defaultSize:P,onDragFinished:function(e){N(e)},children:[Object(O.jsxs)(H.a,{tabBarGutter:5,activeKey:h,className:"code-container",onChange:function(e){x(e)},tabBarStyle:{height:"35px"},type:"card",tabBarExtraContent:Object(O.jsxs)(U.b,{className:"extra-action-container",split:Object(O.jsx)(Y.a,{}),children:[Object(O.jsx)(s.a,{icon:Object(O.jsx)(f.CloseOutlined,{}),className:"extra-action",type:"link",size:"small",onClick:F,children:"\u5173\u95ed"}),Object(O.jsx)("div",{})]}),children:[Object(O.jsx)(Oe,{tab:Object(O.jsxs)("div",{children:["tsx"===h?Object(O.jsx)(xe,{}):Object(O.jsx)(ge,{}),Object(O.jsx)("span",{children:"index.tsx"})]}),children:Object(O.jsx)(je.a,{language:"tsx",style:me.a,showLineNumbers:!0,wrapLines:!0,customStyle:he,children:c})},"tsx"),_.length&&_.map((function(e){var t=e.componentProps,n=e.id,o=(t||{}).fields,a=void 0===o?[]:o;return Object(O.jsx)(Oe,{tab:Object(O.jsxs)("div",{children:[h===n?Object(O.jsx)(xe,{}):Object(O.jsx)(ge,{}),Object(O.jsxs)("span",{children:["List1-",String(n).slice(0,4),".tsx"]})]}),children:Object(O.jsx)(je.a,{language:"tsx",style:me.a,showLineNumbers:!0,wrapLines:!0,customStyle:he,children:pe(a)})},n)}))]}),Object(O.jsx)("div",{className:"form",children:Object(O.jsx)("div",{className:"body",children:k})})]})})})}));n(264),n(631);var ke,we=n(265),Ce=m.Store.Context,Te=m.Store.actionTypes,Ee=Te.SET_TARGET,Se=Te.SET_MOVEABLE_OPTIONS,Pe=Te.UPDATE_COMPONENT_LIST_BY_TARGET,Ne={frame:{translate:[0,0]}},Le=function(){var e=Object(o.useContext)(Ce),t=e.target,n=e.moveableOptions,a=void 0===n?{}:n,i=e.setGlobal,c=a,r=c.target,l=c.elementGuidelines,s=c.frame,u=void 0===s?{translate:[0,0]}:s,d=c.bounds,f=c.verticalGuidelines,b=c.horizontalGuidelines,p=c.draggable,j=void 0===p||p,m=c.resizable,v=void 0===m||m,h=Object(o.useCallback)((function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=document.querySelector(".viewport"),a=(null===o||void 0===o||null===(e=o.getBoundingClientRect)||void 0===e?void 0:e.call(o))||{},c=a.left,r=a.right,l=a.top;a.bottom;i({type:Se,payload:{bounds:{left:Number(c)-t-50,right:Number(r)-n-52,top:l}}})}),[]);return Object(o.useEffect)((function(){h()}),[]),Object(o.useEffect)((function(){var e=t.layout;i({type:Se,payload:void 0===e?{}:e})}),[t]),Object(O.jsx)(we.a,{target:r,elementGuidelines:l,verticalGuidelines:f,horizontalGuidelines:b,snappable:!0,snapThreshold:5,isDisplaySnapDigit:!0,snapGap:!0,snapElement:!0,snapVertical:!0,snapHorizontal:!0,snapCenter:!1,snapDigit:0,bounds:d,draggable:j,throttleDrag:0,startDragRotate:0,throttleDragRotate:0,zoom:1,origin:!1,padding:{left:0,top:0,right:0,bottom:0},resizable:v,keepRatio:!1,throttleResize:0,edge:!1,renderDirections:["nw","n","ne","w","e","sw","s","se"],onDragStart:function(e){e.set(u.translate)},onDrag:function(e){Ne.frame.translate=e.beforeTranslate,e.target.style.transform="translate(".concat(e.beforeTranslate[0],"px, ").concat(e.beforeTranslate[1],"px)")},onDragEnd:function(e){e.target,e.isDrag;var t=e.clientX,n=e.clientY,o=Ne.frame;i({type:Ee,payload:{layout:{frame:o,clientX:t,clientY:n}}}),i({type:Pe,payload:{data:{layout:{frame:o,clientX:t,clientY:n}}}})},onResizeStart:function(e){e.setOrigin(["%","%"]),e.dragStart&&e.dragStart.set(u.translate)},onResize:function(e){var t=e.target,n=e.width,o=e.height,a=e.drag,i=a.beforeTranslate;Ne.width=n,Ne.height=o,Ne.frame.translate=a.beforeTranslate,t.style.width="".concat(n,"px"),t.style.height="".concat(o,"px"),t.style.transform="translate(".concat(i[0],"px, ").concat(i[1],"px)")},onResizeEnd:function(e){if(e.lastEvent){var t=Ne.frame,n=Ne.width,o=Ne.height;i({type:Ee,payload:{layout:{frame:t,width:n,height:o}}}),i({type:Pe,payload:{data:{layout:{frame:t,width:n,height:o}}}})}}})},Re=n(266),Ie=n(268),_e=m.Store.Context,Fe=m.Store.actionTypes.SET_MOVEABLE_OPTIONS,De=null,ze=Object(o.forwardRef)((function(e,t){var n=e.type,i=a.a.useRef(),c=Object(o.useContext)(_e).setGlobal;Object(o.useImperativeHandle)(t,(function(){return{guides:i}}),[]);var l=Object(o.useCallback)((function(){var e,t;null===(e=i.current)||void 0===e||null===(t=e.resize)||void 0===t||t.call(e)}),[]),s=Object(o.useCallback)((function(e){var t,n,o=0,a=0;o+=e.deltaX,a+=e.deltaY,null===i||void 0===i||null===(t=i.scrollGuides)||void 0===t||t.call(i,a),null===i||void 0===i||null===(n=i.scroll)||void 0===n||n.call(i,o)}),[]);return Object(o.useEffect)((function(){var e,t,n,o;null===(e=i.current)||void 0===e||null===(t=e.resize)||void 0===t||t.call(e);var a=document.querySelector(".container");return null===(n=De=new MutationObserver((function(e){l()})))||void 0===n||null===(o=n.observe)||void 0===o||o.call(n,a,{attributes:!0,childList:!0,characterData:!0}),window.addEventListener("wheel",s),window.addEventListener("resize",l),function(){var e,t;null===(e=De)||void 0===e||null===(t=e.disconnect)||void 0===t||t.call(e),De=null,window.removeEventListener("wheel",s),window.removeEventListener("resize",l)}}),[]),Object(O.jsx)(Ie.a,Object(r.a)(Object(r.a)({},e),{},{ref:i,onChangeGuides:function(e){var t=e.guides.map((function(e){return Number(e)+30.5}));"horizontal"===n&&c({type:Fe,payload:{horizontalGuidelines:t}}),"vertical"===n&&c({type:Fe,payload:{verticalGuidelines:t}})}}))})),Ge=(n(632),new(function(){function e(){Object(W.a)(this,e),this.callbacks=void 0,this.callbacks=[]}return Object(X.a)(e,[{key:"addListener",value:function(e,t){if(this.callbacks.length){var n=!1;this.callbacks.forEach((function(o){o.eventName===e&&(n=!0,o.callbacks.push(t))})),n||this.callbacks.push({eventName:e,callbacks:[t]})}else this.callbacks=[{eventName:e,callbacks:[t]}]}},{key:"removeListener",value:function(e,t){this.callbacks.forEach((function(n){n.eventName===e&&(n.callbacks=n.callbacks.filter((function(e){return e!==t})))}))}},{key:"emit",value:function(e){this.callbacks.forEach((function(t){t.eventName===e&&t.callbacks.forEach((function(e){return e()}))}))}}]),e}())),Me="SHOW_SETTING_PANL",Ae="SCROLL_CENTER",Ve="INFINITEVIEWER_SCROLL",Be=function(e){var t=Object(o.useRef)(),n=Object(o.useRef)(),a=Object(o.useRef)(null),i=Object(o.useCallback)((function(){var e;null===(e=a.current)||void 0===e||e.scrollCenter()}),[]);return Object(o.useEffect)((function(){return _(),i(),window.addEventListener("resize",_),Ge.addListener(Ae,i),function(){Ge.removeListener(Ae,i),window.removeEventListener("resize",_)}}),[]),Object(O.jsxs)("div",{className:"infinite-viewer-container",children:[Object(O.jsx)("div",{className:"reset",onClick:function(){i()}}),Object(O.jsx)(ze,{className:"guides horizontal",ref:t,type:"horizontal",height:30}),Object(O.jsx)(ze,{className:"guides vertical",width:30,ref:n,type:"vertical"}),Object(O.jsx)(Re.a,{className:"infinite-viewer",ref:a,useForceWheel:!0,onScroll:function(e){var o,a,i,c,r,l,s,u;Ge.emit(Ve);var d=null===(o=t.current)||void 0===o||null===(a=o.guides)||void 0===a?void 0:a.current,f=null===(i=n.current)||void 0===i||null===(c=i.guides)||void 0===c?void 0:c.current;null===d||void 0===d||null===(r=d.scroll)||void 0===r||r.call(d,e.scrollLeft),null===d||void 0===d||null===(l=d.scrollGuides)||void 0===l||l.call(d,e.scrollTop),null===f||void 0===f||null===(s=f.scroll)||void 0===s||s.call(f,e.scrollTop),null===f||void 0===f||null===(u=f.scrollGuides)||void 0===u||u.call(f,e.scrollLeft)},onPinch:function(e){var o,i,c,r,l=Math.max(.1,e.zoom),s=null===(o=t.current)||void 0===o||null===(i=o.guides)||void 0===i?void 0:i.current,u=null===(c=n.current)||void 0===c||null===(r=c.guides)||void 0===r?void 0:r.current;s.zoom=l,u.zoom=l,a.current.zoom=l},children:Object(O.jsx)("div",{className:"viewport",onContextMenu:function(e){e.preventDefault()},children:e.children})})]})},Ke=(n(633),Object(o.forwardRef)((function(e,t){var n=e.children,a=Object(o.useState)(),c=Object(l.a)(a,2),r=c[0],s=c[1],u=Object(o.useState)(!1),d=Object(l.a)(u,2),f=d[0],b=d[1],p=Object(o.useRef)(null),j=Object(o.useCallback)((function(){b(!1)}),[]);return Object(o.useImperativeHandle)(t,(function(){return{hide:function(){b(!1)},show:function(e){b(!0);var t=e.clientX,n=e.clientY,o=p.current;o.style.left="".concat(t,"px"),o.style.top="".concat(n,"px")}}}),[]),Object(o.useEffect)((function(){return window.addEventListener("click",j),s(document.body),function(){window.removeEventListener("click",j)}}),[]),r?Object(i.createPortal)(Object(O.jsx)("div",{id:"context-menu",ref:p,className:f?"":"hide",children:n}),r):Object(O.jsx)(O.Fragment,{})}))),He=(n(634),function(){return Object(O.jsxs)("div",{className:"logo",children:[Object(O.jsxs)("div",{className:"title",children:[Object(O.jsx)(f.LayoutTwoTone,{}),Object(O.jsx)("span",{style:{marginLeft:"5px"},children:"Form Generator"})]}),Object(O.jsx)("a",{href:"https://gitee.com/resonances/react-visual-editor",children:Object(O.jsx)("img",{width:16,src:"https://gitee.com/resonances/react-visual-editor/widgets/widget_5.svg?color=00aeff",alt:"Fork me on Gitee"})})]})}),qe=n(245),Ue=function(e){var t=e.onClick,n=void 0===t?function(){}:t,a=e.options,i=void 0===a?[]:a;return Object(O.jsx)("div",{className:"menu-container",children:i.map((function(e,t){var a=e.icon,c=e.key,r=e.label,l=e.type,s=e.className;return Object(O.jsxs)(o.Fragment,{children:[Object(O.jsx)("div",{className:"menu-item",children:Object(O.jsxs)(qe.a.Link,{onClick:function(){n(c,r)},className:"del"===l?"".concat(s," del"):s,children:[o.cloneElement(a,{className:"menu-item-icon"}),r]})}),t!==i.length-1&&Object(O.jsx)("hr",{})]},z())}))})},Ye=(n(241),n(263)),We=["colNum"],Xe=["colNum"],Je=["align","gutter","justify","wrap"],Qe=["colNum"],Ze=m.Store.Utils,$e=m.Store.actionTypes,et=m.Store.Hooks,tt=$e.COPY_COMPONENT_LIST,nt=$e.DELETE_TARGET,ot=$e.DEL_COMPONENT_LIST,at=$e.LEFT_REMOVE_COMPONENTS,it=$e.RIGHT_REMOVE_COMPONENTS,ct=$e.SET_COMPONENT_LIST,rt=$e.SET_MOVEABLE_OPTIONS,lt=$e.SET_TARGET_BY_COMPONENT_LIST,st=et.useStore;!function(e){e.copy="\u590d\u5236",e.setting="\u8bbe\u7f6e\u5c5e\u6027",e.del="\u5220\u9664",e.toLeft="\u5de6\u79fb",e.toRight="\u53f3\u79fb"}(ke||(ke={}));var ut=Ze.refreshTarget,dt=[{key:"toTop",icon:Object(O.jsx)(f.VerticalAlignTopOutlined,{}),label:ke.toLeft,type:"toTop"},{key:"topBottom",icon:Object(O.jsx)(f.VerticalAlignBottomOutlined,{}),label:ke.toRight,type:"topBottom"},{key:"copy",icon:Object(O.jsx)(f.CopyOutlined,{}),label:ke.copy},{key:"del",icon:Object(O.jsx)(f.DeleteOutlined,{}),label:ke.del,type:"del"},{key:"setting",icon:Object(O.jsx)(f.SettingOutlined,{}),label:ke.setting}],ft=Object(o.forwardRef)((function(e,t){var n=(st().target||{}).rowProps,o=void 0===n?{}:n,a=(o.colNum,Object(P.a)(o,We));return Object(O.jsx)(u.a,Object(r.a)(Object(r.a)(Object(r.a)({},e),a),{},{ref:t}))}));function bt(e){var t=e.target,n=e.moveableOptions,a=e.componentList,i=void 0===a?[]:a,c=e.setGlobal,s=N.a.useForm(),u=Object(l.a)(s,1)[0],f=Object(o.useRef)(null),b=t||{},p=b.componentProps,m=b.formItemProps,v=b.formProps,h=void 0===v?{}:v,x=b.colProps,g=void 0===x?{}:x,y=b.rowProps,k=void 0===y?{}:y,w=(k.colNum,Object(P.a)(k,Xe)),C=function(e,t){c({type:ct,payload:{newState:t,id:e}})},T=Object(o.useCallback)((function(){var e,t;null===(e=f.current)||void 0===e||null===(t=e.hide)||void 0===t||t.call(e)}),[]);return Object(o.useEffect)((function(){return Ge.addListener(Ve,T),function(){Ge.removeListener(Ve,T)}}),[]),Object(o.useEffect)((function(){(null===m||void 0===m?void 0:m.name)&&u.setFieldsValue(Object(S.a)({},m.name,null===p||void 0===p?void 0:p.defaultValue))}),[t.id]),Object(o.useEffect)((function(){var e={};i.forEach((function(t){var n=t.componentKey,o=t.formItemProps,a=t.componentProps,i=(o||{}).name,c=(a||{}).defaultValue;F(n)||(e[i]=c)})),u.setFieldsValue(e)}),[i,u]),Object(O.jsxs)(N.a,Object(r.a)(Object(r.a)({},h),{},{style:{height:"100%",position:"relative"},form:u,children:[Object(O.jsx)(Ye.ReactSortable,{sort:!0,animation:150,tag:ft,list:i,ghostClass:"sortable-ghost",chosenClass:"sortable-chosen",group:{name:"form-wrap",put:!0},setList:function(e){c({type:ct,payload:{newState:e,id:null===t||void 0===t?void 0:t.id}})},onChoose:function(e){var n=e.item.dataset.id;n!==t.id&&(c({type:lt,payload:{id:n}}),C(n,i))},onUnchoose:function(e){e.item.classList.add("sortable-chosen")},children:i.map((function(e){var n=e.id,o=e.chosen,a=e.children,l=e.componentKey,s=e.formItemProps,b=e.componentProps,p=e.colProps,m=void 0===p?{}:p,v=e.layout,x=void 0===v?{}:v,y=x.frame,T=void 0===y?{translate:[0,0,0]}:y,E=x.height,S=x.width,N=T.translate,L={display:"inline-block",transform:"translate(".concat(N[0],"px, ").concat(N[1],"px)")};"number"===typeof S?L.width="".concat(S,"px"):"string"===typeof S&&(L.width=S),E&&(L.height="".concat(E,"px"));w.align,w.gutter,w.justify,w.wrap;var R=Object(P.a)(w,Je),I=(m.colNum,Object(P.a)(m,Qe));return Object(O.jsx)(d.a,Object(r.a)(Object(r.a)({},Object(r.a)(Object(r.a)({},R),I)),{},{onContextMenu:function(e){var t,o;e.preventDefault(),c({type:lt,payload:{id:n}}),C(n,i),null===(t=f.current)||void 0===t||null===(o=t.show)||void 0===o||o.call(t,e)},children:Object(O.jsx)("div",{"data-id":n,className:"".concat(j," ").concat(o?"drag-target-chosen":""),onClick:function(e){e.stopPropagation(),n!==t.id&&(c({type:lt,payload:{id:n}}),C(n,i))},children:Object(O.jsx)(K,{id:n,form:u,children:a,colProps:g,rowProps:k,formProps:h,formItemProps:s,componentProps:b,componentKey:l},n)})}),n)}))}),Object(O.jsx)(Ke,{ref:f,children:Object(O.jsx)(Ue,{options:dt,onClick:function(e,o){if(o===ke.del&&(c({type:ot,payload:{id:t.id}}),c({type:nt}),c({type:rt,payload:{target:null}})),o===ke.setting&&Ge.emit(Me),o===ke.copy){var a=z();c({type:tt,payload:{id:t.id,newId:a}})}o===ke.toLeft&&(c({type:at,payload:{id:t.id}}),ut(null===n||void 0===n?void 0:n.target,c)),o===ke.toRight&&(c({type:it,payload:{id:t.id}}),ut(null===n||void 0===n?void 0:n.target,c))}})})]}))}var pt=m.Store.Hooks.useStore,jt=function(){var e=pt(),t=e.target,n=e.moveableOptions,o=e.componentList,a=e.setGlobal;return Object(O.jsx)("div",{children:0===(null===o||void 0===o?void 0:o.length)?Object(O.jsx)("div",{className:"not-found-info",children:"\u4ece\u5de6\u4fa7\u70b9\u9009\u7ec4\u4ef6\u8fdb\u884c\u8868\u5355\u8bbe\u8ba1"}):Object(O.jsx)(bt,{target:t,componentList:o,moveableOptions:n,setGlobal:a})})},mt=function(e){var t,n=e.type,o=e.handleType;return Object(O.jsx)(O.Fragment,{children:Object(O.jsx)(s.a,{type:"coms"===n?"primary":"text",ghost:"coms"!==n,icon:Object(O.jsx)(f.WindowsOutlined,{style:(t="coms",{color:n!==t?"#fff":"",fontSize:18})}),onClick:function(){return o("coms")}})})},vt=n(248);var Ot=m.Store.actionTypes,ht=m.Store.Context,xt=Ot.DELETE_ALL_COMPONENT_LIST_AND_TARGET,gt=Ot.SET_MOVEABLE_OPTIONS,yt=function(e){var t=e.type,n=e.handleType,a=Object(o.useRef)(null),i=Object(o.useContext)(ht),c=i.target,r=i.componentList,l=i.setGlobal,u=function(e){return{color:t!==e?"#fff":"",fontSize:18}},d=Object(o.useCallback)((function(){n("setting")}),[]);return Object(o.useEffect)((function(){return Ge.addListener(Me,d),function(){Ge.removeListener(Me,d)}}),[]),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)(s.a,{icon:Object(O.jsx)(f.PlayCircleOutlined,{style:u("run")}),type:"run"===t?"primary":"text",onClick:function(){!function(){var e,t;null===(e=a.current)||void 0===e||e.run(),null===(t=a.current)||void 0===t||t.open()}()}}),Object(O.jsx)(s.a,{icon:Object(O.jsx)(f.PicCenterOutlined,{style:u("center")}),type:"center"===t?"primary":"text",onClick:function(){Ge.emit(Ae)}}),Object(O.jsx)(s.a,{icon:Object(O.jsx)(f.EyeOutlined,{style:u("preview")}),type:"preview"===t?"primary":"text",size:"middle",onClick:function(){!function(){var e=function(e,t){var n,o=null===(n=t.rowProps)||void 0===n?void 0:n.colNum,a={type:"object",properties:{}};return e.forEach((function(e){var t=e.formItemProps.name,n=e.componentKey.toLowerCase().replace(/^.*\./,"");a.properties[t]={type:"string",widget:n}})),{number:o,json:a}}(r,c);console.log(e)}()}}),Object(O.jsx)(s.a,{icon:Object(O.jsx)(f.VerticalAlignBottomOutlined,{style:u("download")}),type:"download"===t?"primary":"text",size:"middle",onClick:function(){}}),Object(O.jsx)(s.a,{icon:Object(O.jsx)(f.DeleteOutlined,{style:u("clean")}),type:"clean"===t?"primary":"text",danger:!0,onClick:function(){vt.a.confirm({title:"\u63d0\u793a",icon:Object(O.jsx)(f.ExclamationCircleOutlined,{}),content:"\u786e\u5b9a\u8981\u6e05\u7a7a\u6240\u6709\u7ec4\u4ef6\u5417\uff1f",okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",onOk:function(){l({type:xt}),l({type:gt,payload:{target:null}})}})}}),Object(O.jsx)(s.a,{icon:Object(O.jsx)(f.SettingOutlined,{style:u("setting")}),type:"setting"===t?"primary":"text",onClick:function(){return n("setting")}}),Object(O.jsx)(ye,{ref:a})]})},kt=(n(637),function(e){var t=Object(o.useState)(""),n=Object(l.a)(t,2),a=n[0],i=n[1],c=function(e){i(a===e?"":e)};return Object(o.useEffect)((function(){["coms","setting",""].includes(a)&&_()}),[a]),Object(O.jsxs)("div",{className:"container",children:[Object(O.jsxs)("div",{className:"left",children:[Object(O.jsx)(mt,{type:a,handleType:c}),Object(O.jsx)(He,{})]}),"coms"===a&&Object(O.jsx)("div",{className:"coms",children:Object(O.jsx)(w,{})}),Object(O.jsx)("div",{className:"content",children:e.children}),"setting"===a&&Object(O.jsx)("div",{className:"setting",children:Object(O.jsx)(E,{})}),Object(O.jsx)("div",{className:"right",children:Object(O.jsx)(yt,{type:a,handleType:c})})]})}),wt=(n(638),n(639),m.Store.Context),Ct=m.Store.INITAL_STATE,Tt=m.Store.commonReducer,Et=m.Store.Hooks.useLPReducer,St=function(){var e=Et(Tt,Ct,"STORE"),t=Object(l.a)(e,2),n=t[0],o=t[1];return Object(O.jsx)(wt.Provider,{value:Object(r.a)(Object(r.a)({},n||Ct),{},{setGlobal:o}),children:Object(O.jsx)(kt,{children:Object(O.jsxs)(Be,{children:[Object(O.jsx)(jt,{}),Object(O.jsx)(Le,{})]})})})};c.a.render(Object(O.jsx)(St,{}),document.getElementById("root"))}},[[640,1,2]]]);